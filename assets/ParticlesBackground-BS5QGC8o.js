import{T as d,C as x,S as b,a as y,F as _,P as z,B as A,b as l,c as B,A as C,d as M}from"./ThreeManager-CZXi-PRp.js";import{_ as P,o as S,c as X}from"./index-A6HivYmU.js";const E={name:"ParticlesBackground",data(){return{mouseX:0,mouseY:0,targetX:0,targetY:0,animationId:null}},created(){this.scene=null,this.camera=null,this.particles=null,this.originalPositions=null,this.phases=null},mounted(){this.init(),window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("three-resize",this.handleResize)},beforeUnmount(){this.cleanup(),window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("three-resize",this.handleResize)},methods:{init(){const e=this.$refs.container;d.mount(e),this.scene=new b,this.scene.background=new y(723724),this.scene.fog=new _(723724,.0015),this.camera=new z(60,window.innerWidth/window.innerHeight,.1,1e3),this.camera.position.z=100,this.camera.position.y=20;const t=new A,i=50,s=50,n=i*s,a=new Float32Array(n*3),p=new Float32Array(n),h=new Float32Array(n),m=4;let o=0;for(let r=0;r<i;r++)for(let c=0;c<s;c++){const g=(r-i/2)*m,f=(c-s/2)*m,v=0;a[o*3]=g,a[o*3+1]=v,a[o*3+2]=f,p[o]=1,h[o]=(r+c)*.1,o++}t.setAttribute("position",new l(a,3)),t.setAttribute("size",new l(p,1)),t.setAttribute("phase",new l(h,1)),this.originalPositions=a.slice(),this.phases=h;const u=this.getSprite(),w=new B({size:.8,map:u,color:1030834,transparent:!0,opacity:.3,sizeAttenuation:!0,blending:C,depthWrite:!1});this.particles=new M(t,w),this.scene.add(this.particles),this.animate()},getSprite(){const e=document.createElement("canvas");e.width=32,e.height=32;const t=e.getContext("2d"),i=t.createRadialGradient(16,16,0,16,16,16);return i.addColorStop(0,"rgba(255,255,255,1)"),i.addColorStop(.2,"rgba(255,255,255,0.8)"),i.addColorStop(.5,"rgba(255,255,255,0.2)"),i.addColorStop(1,"rgba(0,0,0,0)"),t.fillStyle=i,t.fillRect(0,0,32,32),new x(e)},animate(){this.animationId=requestAnimationFrame(this.animate);const e=Date.now()*.001;if(this.targetX=this.mouseX*5e-4,this.targetY=this.mouseY*5e-4,this.particles){const i=this.particles.geometry.attributes.position.array;for(let s=0;s<this.phases.length;s++){const n=Math.sin(e+this.phases[s])*2;i[s*3+1]=n}this.particles.geometry.attributes.position.needsUpdate=!0,this.scene.rotation.x+=(this.targetY-this.scene.rotation.x)*.05,this.scene.rotation.y+=(this.targetX-this.scene.rotation.y)*.05}const t=d.getRenderer();t&&t.render(this.scene,this.camera)},handleMouseMove(e){this.mouseX=e.clientX-window.innerWidth/2,this.mouseY=e.clientY-window.innerHeight/2},handleResize(e){if(this.camera){const{width:t,height:i}=e?e.detail:{width:window.innerWidth,height:window.innerHeight};this.camera.aspect=t/i,this.camera.updateProjectionMatrix()}},cleanup(){cancelAnimationFrame(this.animationId),d.unmount(),this.particles&&(this.scene.remove(this.particles),this.particles.geometry.dispose(),this.particles.material.map.dispose(),this.particles.material.dispose())}}},F={ref:"container",class:"particles-container"};function Y(e,t,i,s,n,a){return S(),X("div",F,null,512)}const $=P(E,[["render",Y],["__scopeId","data-v-9202d38f"]]);export{$ as default};
